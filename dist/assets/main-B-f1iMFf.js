(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function m(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=m(t);fetch(t.href,n)}})();document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".cloud").forEach(e=>{const o=Math.random()*100;e.style.left=`${o}%`;const y=.8+Math.random()*.6;e.style.transform=`scale(${y})`});const a=document.querySelector(".sky"),m=[];for(let e=0;e<100;e++){const o=document.createElement("div");o.classList.add("star");const y=Math.random()*100,P=Math.random()*100;o.style.left=`${y}%`,o.style.top=`${P}%`;const L=Math.random()*2+1;o.style.width=`${L}px`,o.style.height=`${L}px`;const $=Math.random()*5;o.style.animation=`blink 5s ease-in-out ${$}s infinite`,o.style.opacity="0",a.appendChild(o),m.push(o)}const s=document.createElement("div");s.classList.add("moon"),s.style.opacity="0",a.appendChild(s);const t=document.getElementById("timer"),n=document.getElementById("statusText"),l=document.getElementById("startButton"),c=document.getElementById("pauseButton"),b=document.getElementById("resetButton");let d=null,u=null;function k(){try{typeof Audio<"u"&&(d.onerror=function(){console.log("Error al cargar sonido de tic-tac, usando alternativa"),d=null},u.onerror=function(){console.log("Error al cargar sonido de miau, usando alternativa"),u=null})}catch(e){console.log("Error al configurar sonidos:",e),d=null,u=null}}k();function A(){if(d)try{d.currentTime=0,d.play()}catch(e){console.log("Error al reproducir sonido de tic-tac:",e)}else{if(!window.beepContext)if(window.AudioContext=window.AudioContext||window.webkitAudioContext,typeof AudioContext<"u")window.beepContext=new AudioContext;else return;try{const e=window.beepContext.createOscillator(),o=window.beepContext.createGain();e.connect(o),o.connect(window.beepContext.destination),o.gain.value=.1,e.frequency.value=1200,e.type="sine",e.start(),setTimeout(function(){e.stop()},50)}catch(e){console.log("Error al reproducir tic-tac:",e)}}}function T(){if(u)try{u.currentTime=0,u.play()}catch(e){console.log("Error al reproducir sonido de miau:",e)}else{if(!window.beepContext)if(window.AudioContext=window.AudioContext||window.webkitAudioContext,typeof AudioContext<"u")window.beepContext=new AudioContext;else return;try{const e=window.beepContext.createOscillator(),o=window.beepContext.createGain();e.connect(o),o.connect(window.beepContext.destination),o.gain.value=.2,e.frequency.value=500,e.type="sine",e.frequency.setValueAtTime(400,window.beepContext.currentTime),e.frequency.linearRampToValueAtTime(1200,window.beepContext.currentTime+.2),e.frequency.linearRampToValueAtTime(500,window.beepContext.currentTime+.4),e.start(),setTimeout(function(){e.stop()},400)}catch(e){console.log("Error al reproducir miau alternativo:",e)}}}const x=25*60,S=5*60;let i=x,r=null,p=!1,f=!1,C=!1;function B(e){const o=Math.floor(e/60),y=e%60;return`${o.toString().padStart(2,"0")}:${y.toString().padStart(2,"0")}`}function w(){t.textContent=B(i),i<=5&&i>0&&!C?(C=!0,v()):i>5&&(C=!1),i<60&&!f?t.style.color="#f44336":f||(document.body.classList.contains("night-mode")?t.style.color="#e0e0e0":t.style.color="#333")}function v(){i<=5&&i>0&&(A(),setTimeout(()=>{i<=5&&i>0&&v()},1e3))}function g(e){e?(document.body.classList.add("night-mode"),m.forEach(o=>{o.style.opacity="1"}),s.style.opacity="1"):(document.body.classList.remove("night-mode"),m.forEach(o=>{o.style.opacity="0"}),s.style.opacity="0"),w()}function h(){r===null&&(l.style.display="none",c.style.display="inline-block",b.style.display="inline-block",r=setInterval(()=>{i>0?(i--,w()):(clearInterval(r),r=null,f=!f,f?(i=S,n.textContent="Tiempo de Descanso",document.body.classList.add("break-time"),g(!0),T()):(i=x,n.textContent="Tiempo de Trabajo",document.body.classList.remove("break-time"),g(!1),T()),w(),h())},1e3))}function I(){p?(p=!1,c.textContent="Pausar",t.classList.remove("paused"),h()):(p=!0,clearInterval(r),r=null,c.textContent="Reanudar",t.classList.add("paused"))}function M(){clearInterval(r),r=null,f=!1,i=x,n.textContent="Tiempo de Trabajo",document.body.classList.remove("break-time"),g(!1),w(),O()}function O(){l.style.display="inline-block",c.style.display="none",b.style.display="none",c.textContent="Pausar",p=!1,t.classList.remove("paused"),document.body.classList.contains("night-mode")?t.style.color="#e0e0e0":t.style.color="#333"}g(!1),l.addEventListener("click",h),c.addEventListener("click",I),b.addEventListener("click",M)});
